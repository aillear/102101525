# 一个小爬虫

基于`python`的小爬虫, 用于提取`bilibiili`的视频弹幕并加以简单的处理以及可视化。

具体应该实现的功能：

- 数据获取
- 数据分析
- 可视化

## 数据获取部分:

数据获取模块有以下几个功能：

- 根据用户输入的关键字以及需要的视频个数爬取相关视频的`BV`号
- 根据*BV*号获取相关视频的*cid*
- 根据*cid*获取相关视频的当前弹幕池
- 最后汇总各个视频的弹幕池，形成一个字符串列表

---

#### *BV*号获取：`BVFinder(_keyword: str, _video_count: int)`

- [x] 是否完成

- 功能实现：通过关键词获取前n页的相关视频*BV*号, 返回*BV*号的字符串列表
- 参数：
  - _keyword: 关键词
  - _video_count: 读取的视频数量
- 返回值： 获取的*BV*号字符串列表



#### *cid*获取： `CidReader(_bv: str)`

- [x] 是否完成

- 功能实现：读取BV号对应视频的cid
- 参数：_bv ： 视频*BV*号
- 返回值： 对应的*cid*



#### 弹幕池读取： `DanmakuReader(_cid: str)`

- [x] 是否完成

- 功能实现：根据cid读取当前视频弹幕池内弹幕
- 参数：cid ： cid
- 返回值： 弹幕字符串列表



#### 进一步封装：`DataCollect(_keyword: str, _video_count: int)`

- [x] 是否完成

- 功能实现： 封装本模块的功能
- 参数：
  - _keyword: 关键词
  - _video_count: 读取的视频数量
- 返回值：收集的弹幕列表





## 数据分析部分：

数据分析模块应该有以下几个功能：

- 进行简单的统计同类型弹幕个数，最后生成一个字典，键为单条弹幕，值为改弹幕出现的次数
- 将字典保存为`.csv`文件，分为两列。每一行对应一条弹幕，第一列为弹幕数量，第二列为弹幕文本。按顺序从高到低排列。
- 将字符串列表组合成字符串并且分词，为接下来可视化做词云做准备

需要两个模块，一个负责写文件，另一个就是负责分析数据

---

#### 弹幕统计： `StrStatistics(_str_list: list[str])`

- [ ] 是否完成

- 功能实现：统计传入的字符串列表中各个字符串出现的次数。
- 参数：_str_list： 字符串列表
- 返回值： 结果保存为字典



#### 文件保存： `Dictionary2CSV(_dic: dict, _file_name: str, _order_with: bool, _style=True)`

- [ ] 是否完成

- 功能实现：将字典按照某种规则存为`.CSV`文件
- 参数：
  - _dic: 目标字典
  - _file_name： 保存的文件名
  - _order_with： 按照谁的顺序排序， 为`key`则为按照键名排序， 为`value`则按照值排序
  - _style: 格式，为True为键在左值在右，False为值在左键在右



#### 分词：事实上，直接第三方库的接口就已经够方便了。不需要在进行封装了



## 数据可视化部分

- 通过数据分析部分得到的分词结果进行词云生成

---

#### 生成词云图：  `CreateWordCloudImage(_content: str, _file_name: str, *args)`

- [ ] 是否完成

- 功能实现：将字典按照某种规则存为`.CSV`文件
- 参数：
  - _content: 分过词的内容
  - _file_name： 保存的文件名
  - args: 关于生成图的一些参数

